# 02. SQL Basics - SELECT, WHERE, ORDER BY

**Chapter:** SQL Fundamentals & Relational Databases
**Topic:** Foundational SQL query syntax for data retrieval, filtering, and sorting

---

## üìã Overview

Every SQL query begins with SELECT - the most fundamental operation in SQL. Whether you're analyzing data, building reports, or creating data pipelines, you'll use SELECT statements hundreds of times daily.

This subchapter covers the three essential components of SQL querying: **SELECT** (what columns to retrieve), **WHERE** (which rows to filter), and **ORDER BY** (how to sort results). These form the foundation for every query you'll ever write.

Master these basics and you'll be able to explore any dataset, answer business questions, and build more complex analytical queries. Think of SELECT, WHERE, and ORDER BY as the building blocks - everything else in SQL builds upon these concepts.

**Real-World Applications:**
- Explore a new dataset to understand its structure and contents
- Filter customer data to find specific segments (e.g., high-value customers in California)
- Sort sales data to identify top-performing products or periods
- Extract subsets of data for reporting or further analysis

---

## üéØ Learning Objectives

After completing this subchapter, you will be able to:
- Write basic SELECT queries to retrieve specific columns from tables
- Use the WHERE clause to filter rows based on conditions
- Apply comparison operators (<, >, =, <=, >=, !=) for numeric and text filtering
- Sort query results using ORDER BY in ascending or descending order
- Combine multiple conditions using AND/OR logical operators
- Use pattern matching with LIKE and wildcards (%, _)
- Limit result sets for exploration and testing
- Understand SQL query execution order (FROM ‚Üí WHERE ‚Üí SELECT ‚Üí ORDER BY ‚Üí LIMIT)

---

## üìö Core Concepts

### 1. SELECT - Retrieving Data

The SELECT statement specifies which columns to retrieve from a table.

#### Syntax
```sql
SELECT column1, column2, column3
FROM table_name;
```

#### Selecting All Columns
```sql
-- Use * to select all columns (avoid in production!)
SELECT * FROM customers;
```

**‚ö†Ô∏è Production Warning:** While `SELECT *` is convenient for exploration, always specify column names in production code for:
- **Performance:** Only retrieve columns you need
- **Clarity:** Makes queries self-documenting
- **Stability:** Schema changes won't break queries unexpectedly

#### Selecting Specific Columns
```sql
-- Best practice: Explicit column names
SELECT
    customer_id,
    first_name,
    last_name,
    email,
    created_at
FROM customers;
```

#### Column Aliases
```sql
-- Rename columns in output for clarity
SELECT
    customer_id AS id,
    first_name AS fname,
    last_name AS lname,
    email AS contact_email
FROM customers;
```

---

### 2. WHERE - Filtering Rows

The WHERE clause filters rows based on conditions. Only rows matching the condition are returned.

#### Comparison Operators

| Operator | Meaning | Example |
|----------|---------|---------|
| `=` | Equal | `WHERE age = 25` |
| `!=` or `<>` | Not equal | `WHERE status != 'inactive'` |
| `>` | Greater than | `WHERE price > 100` |
| `>=` | Greater than or equal | `WHERE quantity >= 10` |
| `<` | Less than | `WHERE age < 18` |
| `<=` | Less than or equal | `WHERE discount <= 0.5` |

#### Examples
```sql
-- Numeric filtering
SELECT * FROM products
WHERE price > 50.00;

-- Text filtering (case-sensitive in some databases)
SELECT * FROM customers
WHERE country = 'USA';

-- Multiple conditions with AND
SELECT * FROM orders
WHERE order_date >= '2024-01-01'
  AND total_amount > 1000;

-- Multiple conditions with OR
SELECT * FROM customers
WHERE country = 'USA'
   OR country = 'Canada';
```

---

### 3. ORDER BY - Sorting Results

The ORDER BY clause sorts query results by one or more columns.

#### Syntax
```sql
SELECT column1, column2
FROM table_name
ORDER BY column1 [ASC|DESC];
```

- **ASC:** Ascending order (smallest to largest, A to Z) - DEFAULT
- **DESC:** Descending order (largest to smallest, Z to A)

#### Examples
```sql
-- Sort by single column (ascending by default)
SELECT product_name, price
FROM products
ORDER BY price;

-- Sort descending
SELECT product_name, price
FROM products
ORDER BY price DESC;

-- Sort by multiple columns
SELECT
    country,
    city,
    customer_name
FROM customers
ORDER BY country ASC, city ASC;
```

**Multi-Column Sorting Logic:**
1. First, sort by `country` (ascending)
2. Within each country, sort by `city` (ascending)
3. Result: Customers grouped by country, then by city within each country

---

### 4. Logical Operators - Combining Conditions

#### AND Operator
All conditions must be TRUE for the row to be returned.

```sql
-- Customers in USA with account balance > $1000
SELECT customer_name, country, account_balance
FROM customers
WHERE country = 'USA'
  AND account_balance > 1000;
```

**Truth Table for AND:**
| Condition 1 | Condition 2 | Result |
|-------------|-------------|--------|
| TRUE | TRUE | TRUE ‚úì |
| TRUE | FALSE | FALSE |
| FALSE | TRUE | FALSE |
| FALSE | FALSE | FALSE |

#### OR Operator
At least ONE condition must be TRUE for the row to be returned.

```sql
-- Customers from USA or Canada
SELECT customer_name, country
FROM customers
WHERE country = 'USA'
   OR country = 'Canada';
```

**Truth Table for OR:**
| Condition 1 | Condition 2 | Result |
|-------------|-------------|--------|
| TRUE | TRUE | TRUE ‚úì |
| TRUE | FALSE | TRUE ‚úì |
| FALSE | TRUE | TRUE ‚úì |
| FALSE | FALSE | FALSE |

#### Combining AND/OR (Use Parentheses!)
```sql
-- High-value customers from USA or all customers from Canada
SELECT customer_name, country, account_balance
FROM customers
WHERE (country = 'USA' AND account_balance > 5000)
   OR country = 'Canada';
```

**‚ö†Ô∏è Critical:** Always use parentheses when mixing AND/OR to make precedence explicit!

---

### 5. Pattern Matching with LIKE

The LIKE operator searches for a specified pattern in a column.

#### Wildcards

| Wildcard | Meaning | Example | Matches |
|----------|---------|---------|---------|
| `%` | Zero or more characters | `'%son'` | "Johnson", "Anderson", "son" |
| `%` | | `'A%'` | "Alice", "Andrew", "A" |
| `%` | | `'%tech%'` | "technology", "biotech", "tech" |
| `_` | Exactly one character | `'J_hn'` | "John", "Jahn" (NOT "Johan") |

#### Examples
```sql
-- Find customers whose name starts with 'A'
SELECT customer_name
FROM customers
WHERE customer_name LIKE 'A%';

-- Find emails from Gmail
SELECT email
FROM customers
WHERE email LIKE '%@gmail.com';

-- Find product codes like "PROD-XX" (exactly 7 characters)
SELECT product_code
FROM products
WHERE product_code LIKE 'PROD-__';

-- Case-insensitive search (use ILIKE in PostgreSQL)
SELECT customer_name
FROM customers
WHERE customer_name ILIKE '%smith%';
```

---

### 6. LIMIT - Restricting Result Size

The LIMIT clause restricts the number of rows returned.

```sql
-- Get first 10 customers
SELECT * FROM customers
LIMIT 10;

-- Get top 5 highest-priced products
SELECT product_name, price
FROM products
ORDER BY price DESC
LIMIT 5;

-- OFFSET: Skip first N rows (useful for pagination)
SELECT * FROM customers
ORDER BY customer_id
LIMIT 10 OFFSET 20;  -- Rows 21-30
```

**Use Cases:**
- **Exploration:** Quickly preview data (`LIMIT 10`)
- **Testing:** Test queries on small subsets before running on millions of rows
- **Top-N queries:** Find top performers (combine with ORDER BY)
- **Pagination:** Display results in pages (LIMIT + OFFSET)

---

## üí° Practical Examples

### Example 1: E-Commerce Customer Analysis
```sql
-- Find high-value customers in California who joined this year
SELECT
    customer_id,
    first_name,
    last_name,
    email,
    total_purchases
FROM customers
WHERE state = 'CA'
  AND total_purchases > 1000
  AND created_at >= '2024-01-01'
ORDER BY total_purchases DESC
LIMIT 20;
```

**Business Question:** Who are our top 20 customers in California who joined this year and have spent over $1,000?

---

### Example 2: Product Inventory Check
```sql
-- Find low-stock products that need reordering
SELECT
    product_id,
    product_name,
    category,
    quantity_in_stock,
    reorder_level
FROM products
WHERE quantity_in_stock < reorder_level
  AND is_active = TRUE
ORDER BY quantity_in_stock ASC;
```

**Business Question:** Which active products are below reorder level and need restocking?

---

### Example 3: Sales Report
```sql
-- Recent high-value orders
SELECT
    order_id,
    customer_id,
    order_date,
    total_amount,
    status
FROM orders
WHERE order_date >= '2024-10-01'
  AND total_amount > 500
  AND status IN ('processing', 'shipped')
ORDER BY order_date DESC, total_amount DESC;
```

**Business Question:** What are our recent high-value orders that are currently being processed or shipped?

---

## üîß Code Examples

### Complete Query Structure
```sql
-- Well-formatted SQL query
SELECT
    c.customer_id,
    c.customer_name,
    c.email,
    c.country
FROM customers AS c
WHERE c.country IN ('USA', 'Canada', 'UK')
  AND c.status = 'active'
  AND c.created_at >= '2023-01-01'
ORDER BY c.customer_name ASC
LIMIT 100;
```

**Formatting Best Practices:**
- SELECT columns on separate lines
- Align WHERE conditions
- Use meaningful table aliases (c for customers, o for orders)
- Add blank lines between major clauses
- Use consistent indentation (2 or 4 spaces)

---

### Query Execution Order (Behind the Scenes)

```sql
SELECT customer_name, total_purchases    -- 3. Select specified columns
FROM customers                          -- 1. Start with this table
WHERE total_purchases > 1000            -- 2. Filter rows
ORDER BY total_purchases DESC           -- 4. Sort results
LIMIT 10;                               -- 5. Limit to 10 rows
```

**Understanding execution order helps write correct queries:**
1. **FROM:** Identify source table(s)
2. **WHERE:** Filter rows
3. **SELECT:** Choose columns (you can't ORDER BY a column not in SELECT in some databases)
4. **ORDER BY:** Sort results
5. **LIMIT:** Restrict number of rows

---

## ‚úÖ Best Practices

### 1. Always Specify Column Names
```sql
-- ‚ùå Bad: Avoid in production
SELECT * FROM customers;

-- ‚úÖ Good: Explicit columns
SELECT customer_id, customer_name, email FROM customers;
```

### 2. Use Table Aliases in Multi-Table Queries
```sql
-- ‚úÖ Good: Clear and readable
SELECT
    c.customer_name,
    o.order_date
FROM customers AS c
JOIN orders AS o ON c.customer_id = o.customer_id;
```

### 3. Format for Readability
```sql
-- ‚úÖ Good: Easy to read and maintain
SELECT
    product_name,
    category,
    price
FROM products
WHERE category = 'Electronics'
  AND price BETWEEN 100 AND 500
ORDER BY price DESC;
```

### 4. Use LIMIT During Development
```sql
-- Test query logic on small subset first
SELECT * FROM large_table
WHERE complex_condition
LIMIT 100;  -- Remove after testing
```

### 5. Add Comments for Complex Logic
```sql
-- Find customers who haven't ordered in 90+ days (churn risk)
SELECT customer_id, last_order_date
FROM customers
WHERE last_order_date < CURRENT_DATE - INTERVAL '90 days'
  AND status = 'active'
ORDER BY last_order_date;
```

---

## ‚ö†Ô∏è Common Pitfalls

### 1. Forgetting Quotes Around Text Values
```sql
-- ‚ùå Wrong: Will cause error
WHERE country = USA

-- ‚úÖ Correct: Use quotes for text
WHERE country = 'USA'
```

### 2. Case Sensitivity Issues
```sql
-- May not match "usa", "Usa", or "UsA" depending on database
WHERE country = 'USA'

-- ‚úÖ Better: Use case-insensitive comparison
WHERE UPPER(country) = 'USA'
-- Or in PostgreSQL:
WHERE country ILIKE 'usa'
```

### 3. Incorrect AND/OR Precedence
```sql
-- ‚ùå Ambiguous: Which takes precedence?
WHERE country = 'USA' OR country = 'Canada' AND purchases > 1000

-- ‚úÖ Clear: Use parentheses
WHERE (country = 'USA' OR country = 'Canada') AND purchases > 1000
```

### 4. Using LIKE Without Wildcards
```sql
-- ‚ùå Same as = operator (no pattern matching)
WHERE customer_name LIKE 'John'

-- ‚úÖ Correct: Use wildcards for pattern matching
WHERE customer_name LIKE '%John%'
```

### 5. Sorting Without ORDER BY
```sql
-- ‚ùå No guaranteed order (database decides)
SELECT * FROM customers LIMIT 10;

-- ‚úÖ Explicit ordering
SELECT * FROM customers
ORDER BY customer_id
LIMIT 10;
```

---

## üèãÔ∏è Hands-On Exercises

### Exercise 1: Basic SELECT
Using the `customers` table, write queries to:
1. Select all columns for all customers
2. Select only customer_id, name, and email
3. Use aliases to rename columns (id, full_name, contact_email)

### Exercise 2: Filtering with WHERE
1. Find all customers from 'USA'
2. Find customers with account_balance > $5,000
3. Find customers from 'USA' with balance > $5,000 (use AND)

### Exercise 3: Pattern Matching
1. Find customers whose name starts with 'A'
2. Find customers with Gmail email addresses
3. Find customers whose name contains 'son'

### Exercise 4: Sorting
1. List all products sorted by price (lowest to highest)
2. List all products sorted by price (highest to lowest)
3. Sort customers by country, then by city within each country

### Exercise 5: Complex Filtering
1. Find customers from either 'USA' or 'Canada' with balance > $1,000
2. Find products priced between $50 and $200 in category 'Electronics'
3. Find top 10 highest-spending customers

**Solutions:** Available in `Exercises/Chapter-05/Solutions/Exercise-01-Solutions.sql`

---

## üìö Further Reading

### Official Documentation
- [PostgreSQL SELECT](https://www.postgresql.org/docs/current/sql-select.html)
- [MySQL SELECT Syntax](https://dev.mysql.com/doc/refman/8.0/en/select.html)
- [SQL Server SELECT](https://learn.microsoft.com/en-us/sql/t-sql/queries/select-transact-sql)

### Tutorials
- [SQL SELECT Tutorial (W3Schools)](https://www.w3schools.com/sql/sql_select.asp)
- [SQL WHERE Clause (Mode Analytics)](https://mode.com/sql-tutorial/sql-where/)

### Practice
- [SQLBolt Lessons 1-3](https://sqlbolt.com/) - Interactive SELECT practice
- [LeetCode Easy SQL Problems](https://leetcode.com/problemset/database/?difficulty=Easy)

---

## üìù Key Takeaways

1. **SELECT** specifies which columns to retrieve - always use explicit column names in production
2. **WHERE** filters rows based on conditions - master comparison and logical operators
3. **ORDER BY** sorts results - specify ASC/DESC explicitly for clarity
4. **LIKE** enables pattern matching with wildcards (% for zero or more characters, _ for exactly one)
5. **LIMIT** restricts result size - essential for testing and top-N queries
6. Use **parentheses** when combining AND/OR to make precedence clear
7. **Query execution order:** FROM ‚Üí WHERE ‚Üí SELECT ‚Üí ORDER BY ‚Üí LIMIT
8. Always **format SQL for readability** - your future self will thank you
9. **Test on small datasets** first using LIMIT before running on large tables
10. **Add comments** to explain complex business logic, not basic syntax

---

## üîó Related Concepts

- [[03. Filtering and Logical Operators|Next: Advanced Filtering Techniques]]
- [[04. Aggregate Functions|Aggregating Data with COUNT, SUM, AVG]]
- [[06. JOINs - Combining Tables|Combining Data from Multiple Tables]]
- [[Resources/Legacy-Content/1. SQL/01. SQL Basics - Quick Reference|Original SQL Basics Notes]]

---

## ‚úèÔ∏è Notes Section

**My Key Insights:**
-

**Questions to Explore Further:**
-

**Real-World Applications I've Seen:**
-

**Tricky Scenarios I've Encountered:**
-

---

*Created: October 21, 2025*
*Last Updated: October 21, 2025*
*Status: ‚úÖ Complete - Ready for study*
